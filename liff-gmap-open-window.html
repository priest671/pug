<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no"><title>Open google maps url with liff.openWindow()</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-39556213-3"></script><script>window.dataLayer = window.dataLayer || []
function gtag () { dataLayer.push(arguments) } // eslint-disable-line
gtag('js', new Date())
gtag('config', 'UA-39556213-3')</script><script>(function () {
  const hostname = location.host.split(':')[0]
  if (hostname === 'localhost') document.write(`<script src="http://${hostname}:35729/livereload.js?snipver=1"></` + 'script>')
})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-default@3/default.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@9/dist/sweetalert2.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&amp;display=swap"><style>[v-cloak] {
  display: none; }
</style></head><body><div class="container my-3" id="app" v-cloak><h3 class="text-center my-3">Open google maps url with liff.openWindow()</h3><h4 class="text-center">Enviorment</h4><ul><li>getLineVersion: {{ getLineVersion }}</li><li>getOS: {{ getOS }}</li><li>getVersion: {{ getVersion }}</li><li>isInClient: {{ isInClient }}</li></ul><button class="btn btn-block btn-primary my-3" type="button" @click="btnGmap(false)">external: false</button><button class="btn btn-block btn-primary my-3" type="button" @click="btnGmap(true)">external: true</button></div><script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script><script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/json5@2/dist/index.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/papaparse@5/papaparse.min.js"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1/dist/umd/popper.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://cdn.jsdelivr.net/npm/qs@6/dist/qs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script><script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script><!-- bootstrap require jquery and pupper--><script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vconsole@3/dist/vconsole.min.js"></script><script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script><script>window.vConsole = new VConsole()
const genGoogleMapUrl = (query, queryPlaceId) => {
  const gmap = new URL('https://www.google.com/maps/search/')
  gmap.searchParams.set('api', '1')
  gmap.searchParams.set('query', query)
  if (queryPlaceId) gmap.searchParams.set('query_place_id', queryPlaceId)
  return gmap.href
}
window.vm = new Vue({
  el: '#app',
  data: {
    getLineVersion: '?',
    getOS: '?',
    getVersion: '?',
    isInClient: '?',
  },
  async mounted () {
    await liff.init({ liffId: '1654046335-kWvqeyYW' })
    _.each(['getLineVersion', 'getOS', 'getVersion', 'isInClient'], k => {
      const tmp = _.invoke(liff, k)
      if (_.isNil(tmp)) return
      this.$set(this, k, tmp)
    })
  },
  methods: {
    async btnGmap (external = false) {
      liff.openWindow({
        url: genGoogleMapUrl('24.959276,121.419008', 'ChIJ40_T2-scaDQRF36Y2c_qORY'),
        external,
      })
    },
  },
})</script></body></html>