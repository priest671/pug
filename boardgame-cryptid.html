<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no"><title>詭影尋蹤線索紙</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-39556213-3"></script><script>window.dataLayer = window.dataLayer || []
function gtag () { dataLayer.push(arguments) } // eslint-disable-line
gtag('js', new Date())
gtag('config', 'UA-39556213-3')</script><script>(function () {
  const hostname = location.host.split(':')[0]
  if (hostname === 'localhost') document.write(`<script src="http://${hostname}:35729/livereload.js?snipver=1"></` + 'script>')
})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-default@3/default.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@9/dist/sweetalert2.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&amp;display=swap"><meta property="fb:app_id" content="2133031763635285"><meta property="og:description" content="桌遊「詭影尋蹤」的線索紙"><meta property="og:image:height" content="640"><meta property="og:image:width" content="1280"><meta property="og:image" content="https://i.imgur.com/OxTy7GL.png"><meta property="og:locale" content="zh_TW"><meta property="og:site_name" content="筆記國度"><meta property="og:title" content="詭影尋蹤線索紙"><meta property="og:type" content="website"><meta property="og:url" content="https://taichunmin.idv.tw/pug/boardgame-cryptid.html"><style>[v-cloak] {
  display: none; }

body, .h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {
  font-family: 'Noto Sans TC', sans-serif; }

#app table.table-cryptid {
  user-select: none; }
  #app table.table-cryptid th, #app table.table-cryptid td {
    width: calc(100% / 3); }
    #app table.table-cryptid th .img-icon, #app table.table-cryptid td .img-icon {
      background-size: 16px 16px;
      background-repeat: no-repeat;
      background-position: center; }

.bg-player1, .bg-player1:disabled {
  background-color: #f5c6cb; }

.bg-player2, .bg-player2:disabled {
  background-color: #c3e6cb; }

.bg-player3, .bg-player3:disabled {
  background-color: #b8daff; }

.bg-player4, .bg-player4:disabled {
  background-color: #ffeeba; }

.bg-player5, .bg-player5:disabled {
  background-color: #e4d5fe; }
</style></head><body><div class="my-3 container" id="app" v-cloak><h2 class="mb-3 text-center">詭影尋蹤線索紙</h2><div class="row mb-2 mx-n1"><div class="col-4 mb-2 px-1"><button class="btn btn-block btn-outline-danger" type="button" @click="btnReset()"><span class="fa fa-fw fa-trash-o"></span> 清空</button></div><div class="col-4 mb-2 px-1" v-for="player in [0,1,2,3,4]"><button class="btn btn-block btn-outline-dark" type="button" v-if="i.player === player" :class="`bg-player${ player + 1 }`" disabled><span class="fa fa-fw fa-pencil-square-o"></span> {{ PLAYERS[player] }}</button><button class="btn btn-block btn-outline-dark" type="button" v-else @click="i.player = player" :class="`bg-player${ player + 1 }`"><span class="fa fa-fw fa-user"></span> {{ PLAYERS[player] }}</button></div></div><table class="mb-2 table table-sm table-bordered table-cryptid" v-for="(table, tno) in CRYPTID_TABLES"><thead class="thead-dark"><tr><th class="text-center" colspan="3">{{ table.thead }}</th></tr></thead><tbody class="text-center"><tr v-for="(row, rno) in table.rows"><th><span class="fa fa-fw img-icon" v-if="row.imgur2" :style="{backgroundImage: `url(https://i.imgur.com/${row.imgur2}.png)`}">&nbsp;</span><span class="fa fa-fw mr-1 img-icon" :style="{backgroundImage: `url(https://i.imgur.com/${row.imgur}.png)`}">&nbsp;</span>{{ row.name }}</th><template v-for="yn in [0, 1]"><td class="px-0" :class="ceil(tno, rno, yn) ? `bg-player${ i.player + 1 }` : ''" @click="ceil(tno, rno, yn, 1)"><span class="fa fa-fw mr-1" v-if="" :class="ceil(tno, rno, yn) ? 'fa-check' : 'fa-times'"></span>{{ ['位於', '不在'][yn] }}</td></template></tr></tbody></table></div><script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script><script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/json5@2/dist/index.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/papaparse@5/papaparse.min.js"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1/dist/umd/popper.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://cdn.jsdelivr.net/npm/qs@6/dist/qs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script><script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script><!-- bootstrap require jquery and pupper--><script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js"></script><script>const CRYPTID_TABLES = [
  {
    thead: '某種地形',
    rows: [
      { name: '海洋', imgur: 'nOYNYRv' },
      { name: '山地', imgur: 'oHUGMJV' },
      { name: '森林', imgur: '4DFKxgZ' },
      { name: '沼澤', imgur: 'MhJRI1z' },
      { name: '沙漠', imgur: 'E8YBubU' },
    ],
  },
  {
    thead: '距離 1 格內',
    rows: [
      { name: '海洋', imgur: 'nOYNYRv' },
      { name: '山地', imgur: 'oHUGMJV' },
      { name: '森林', imgur: '4DFKxgZ' },
      { name: '沼澤', imgur: 'MhJRI1z' },
      { name: '沙漠', imgur: 'E8YBubU' },
      { name: '動物', imgur: 'XIaghuL', imgur2: 'yqy7QTJ' },
    ],
  },
  {
    thead: '距離 2 格內',
    rows: [
      { name: '石柱', imgur: 'tWRZXxC' },
      { name: '小屋', imgur: '5BSsBIQ' },
      { name: '狐狸', imgur: 'yqy7QTJ' },
      { name: '黑熊', imgur: 'XIaghuL' },
    ],
  },
  {
    thead: '距離建築 3 格內',
    rows: [
      { name: '綠色', imgur: 'TFH19zA' },
      { name: '白色', imgur: 'ZTzaTpc' },
      { name: '藍色', imgur: 'sJjZjAZ' },
      { name: '黑色', imgur: 'byWjTZn' },
    ],
  },
]
const PLAYERS = ['紅色', '綠色', '藍色', '黃色', '紫色']
window.vm = new Vue({
  el: '#app',
  data: {
    CRYPTID_TABLES,
    PLAYERS,
    i: {
      player: 0,
      clues: null,
    },
  },
  async mounted () {
    // 自動儲存功能
    try {
      const saved = JSON5.parse(localStorage.getItem(location.pathname))
      if (saved) this.$set(this, 'i', { ...this.i, ...saved })
    } catch (err) {}
    this.$watch('i', () => {
      localStorage.setItem(location.pathname, JSON5.stringify(this.i))
    }, { deep: true })

    if (!this.i.clues) await this.btnReset(true)
  },
  methods: {
    async btnReset (slient = false) {
      if (!slient) {
        const confirm = await Swal.fire({
          cancelButtonColor: '#3085d6',
          cancelButtonText: '保持原樣',
          confirmButtonColor: '#d33',
          confirmButtonText: '重設紀錄',
          focusCancel: true,
          icon: 'warning',
          showCancelButton: true,
          text: '是否開始 1 個全新的紀錄？',
        })
        if (!confirm.value) return
      }
      this.i.clues = _.times(5, () => _.map(CRYPTID_TABLES, table => _.map(table.rows, row => [1, 1])))
    },
    ceil (tno, rno, yn, not) {
      const oldVal = _.get(this.i.clues, [this.i.player, tno, rno, yn])
      if (!not) return oldVal
      this.$set(_.get(this, ['i', 'clues', this.i.player, tno, rno]), yn, oldVal ? 0 : 1)
    },
  },
})</script></body></html>